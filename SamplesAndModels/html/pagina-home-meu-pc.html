<!doctype html>
<html lang="pt-BR">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>MICRO-08 | Home</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<style>
			/* a transparencia do header e alguns componentes, só pra dar um xalalá */
			.glass {
				background: rgba(255,255,255,0.6);
				backdrop-filter: blur(6px);
			}
		</style>
	</head>
	<body class="min-h-screen bg-gradient-to-br from-rose-50 via-white to-amber-50 text-gray-800">
		<header class="bg-white/60 backdrop-blur sticky top-0 z-10 shadow-sm">
			<div class="max-w-7xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between">
				<div class="flex items-center gap-2 sm:gap-3">
					<div class="w-8 h-8 sm:w-10 sm:h-10 rounded-md bg-rose-500 flex items-center justify-center text-white font-bold text-sm sm:text-base">PW</div>
					<div>
						<h1 class="text-sm sm:text-lg font-semibold">Servidor Local</h1>
						<p class="text-xs text-gray-500 hidden sm:block">Servidor Local de William Pilger</p>
					</div>
				</div>
				<nav class="flex gap-2 items-center">
					<!-- <button class="px-3 py-1 rounded-md bg-rose-600 text-white text-sm">Sair</button> -->
				</nav>
			</div>
		</header>

		<main class="max-w-7xl mx-auto px-3 sm:px-4 py-6 sm:py-10">
			
			<div class="mb-6 sm:mb-8">
				<h2 class="text-xl sm:text-2xl font-bold text-gray-800">Bem-vindo!</h2>
				<p class="text-sm sm:text-base text-gray-600 mt-1">Painel de Serviços e Servidores - Authenty Ltda.</p>
			</div>

			<!-- principal -->
			<div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6">

				<!--  esquerda - Aplicações -->
				<div class="lg:col-span-2 space-y-4 sm:space-y-6">
					<div class="glass rounded-xl p-4 sm:p-6 shadow-md">
						<h3 class="text-base sm:text-lg font-semibold mb-3 sm:mb-4">Serviços/Sites Disponíveis</h3>
						<div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
							<a href="http://ligarmeupc.com:3030" class="p-3 sm:p-4 border-2 border-gray-200 rounded-lg hover:border-rose-300 hover:bg-rose-50 transition-all text-left block">
								<div class="flex items-center gap-2 sm:gap-3">
									<div class="w-8 h-8 sm:w-10 sm:h-10 bg-rose-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                        <svg class="w-5 h-5 text-rose-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                        </svg>
									</div>
									<div class="min-w-0">
										<p class="font-semibold text-gray-800 text-sm sm:text-base">Ligar/Monitorar Computadores</p>
										<p class="text-xs text-gray-500 hidden sm:block">Ligar computadores remotamente com WOL</p>
									</div>
								</div>
							</a>

							<a href="http://authentylocal.com.br:6969" class="p-3 sm:p-4 border-2 border-gray-200 rounded-lg hover:border-amber-300 hover:bg-amber-50 transition-all text-left block">
								<div class="flex items-center gap-2 sm:gap-3">
									<div class="w-8 h-8 sm:w-10 sm:h-10 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0">
										<svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
										</svg>
									</div>
									<div class="min-w-0">
										<p class="font-semibold text-gray-800 text-sm sm:text-base">Authenty Precificação - Stable</p>
										<p class="text-xs text-gray-500 hidden sm:block">Acessar o Authenty precificação</p>
									</div>
								</div>
							</a>


							<!-- <button class="p-4 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all text-left">
								<div class="flex items-center gap-3">
									<div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
										<svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
										</svg>
									</div>
									<div>
										<p class="font-semibold text-gray-800">Validar Cadastros</p>
										<p class="text-xs text-gray-500">Aprovar documentos</p>
									</div>
								</div>
							</button>

							<button class="p-4 border-2 border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-all text-left">
								<div class="flex items-center gap-3">
									<div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
										<svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
										</svg>
									</div>
									<div>
										<p class="font-semibold text-gray-800">Sistema de Pagamentos</p>
										<p class="text-xs text-gray-500">Consultar e gerenciar pagamentos</p>
									</div>
								</div>
							</button>

							<button class="p-4 border-2 border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left">
								<div class="flex items-center gap-3">
									<div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center">
										<svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
										</svg>
									</div>
									<div>
										<p class="font-semibold text-gray-800">Relatórios</p>
										<p class="text-xs text-gray-500">Visualizar estatísticas</p>
									</div>
								</div>
							</button> -->
						</div>
                        
                        <!-- Serviços dinâmicos serão inseridos aqui -->
						<div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4" id="dynamic-services">
							<!-- Loading inicial -->
							<div class="col-span-full flex items-center justify-center py-8">
								<div class="flex items-center gap-3">
									<svg class="animate-spin h-5 w-5 text-rose-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
										<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
										<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
									</svg>
									<span class="text-sm text-gray-600">Verificando serviços disponíveis...</span>
								</div>
							</div>
						</div>
					</div>

					<!-- Gráficos de Desempenho -->
					<div class="glass rounded-xl p-4 sm:p-6 shadow-md">
						<h3 class="text-base sm:text-lg font-semibold mb-3 sm:mb-4">Desempenho do Sistema (MICRO-08)</h3>
						<div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
							
							<!-- CPU -->
							<div class="p-3 sm:p-4 bg-white/50 rounded-lg">
								<div class="flex items-center justify-between mb-2">
									<span class="text-xs sm:text-sm font-medium text-gray-700">CPU</span>
									<span class="text-base sm:text-lg font-bold text-rose-600" id="cpu-percent">--</span>
								</div>
								<div class="w-full bg-gray-200 rounded-full h-3">
									<div id="cpu-bar" class="bg-gradient-to-r from-rose-400 to-rose-600 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
								</div>
								<div class="mt-2 text-xs text-gray-500" id="cpu-cores">-- cores</div>
							</div>

							<!-- RAM -->
							<div class="p-3 sm:p-4 bg-white/50 rounded-lg">
								<div class="flex items-center justify-between mb-2">
									<span class="text-xs sm:text-sm font-medium text-gray-700">Memória RAM</span>
									<span class="text-base sm:text-lg font-bold text-blue-600" id="ram-percent">--</span>
								</div>
								<div class="w-full bg-gray-200 rounded-full h-3">
									<div id="ram-bar" class="bg-gradient-to-r from-blue-400 to-blue-600 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
								</div>
								<div class="mt-2 text-xs text-gray-500" id="ram-usage">-- / -- GB</div>
							</div>

						</div>


						<div class="mt-4 text-xs text-gray-500 text-center">
							Última atualização: <span id="last-update">--</span>
						</div>
					</div>

                    <div class="glass rounded-xl p-4 shadow-md">
                        <h3 class="text-lg font-semibold mb-2">Monitoramento Detalhado - Netdata</h3>
						<a href="http://authentylocal.com.br:19999" target="_blank" class="block relative">
							<iframe src="http://authentylocal.com.br:19999" frameborder="0" class="w-full h-96 rounded-lg"></iframe>
						</a>
                    </div>

				</div>

				<!-- direita -->
				<aside class="space-y-4 sm:space-y-6">

					<!-- acesso rapido -->
					<div class="glass rounded-xl p-4 sm:p-5 shadow-md">
						<h3 class="text-base sm:text-lg font-semibold mb-3">Acesso rápido</h3>
						<div class="space-y-2">
							<a href="https://github.com/williampilger" target="_blank" class="block w-full text-left px-3 py-2 rounded-md border border-gray-200 text-xs sm:text-sm hover:bg-gray-50 transition-colors">
								Github - William
							</a>
							<a href="https://github.com/authentyae" target="_blank" class="block w-full text-left px-3 py-2 rounded-md border border-gray-200 text-xs sm:text-sm hover:bg-gray-50 transition-colors">
								Github - Authenty
							</a>
							<a href="https://authenty.com.br/contacts/william" target="_blank" class="block w-full text-left px-3 py-2 rounded-md border border-gray-200 text-xs sm:text-sm hover:bg-gray-50 transition-colors">
								Contato - William Pilger
							</a>
						</div>
					</div>

					<!-- resumo do sistma -->
					<!-- <div class="glass rounded-xl p-5 shadow-md">
						<h3 class="font-semibold mb-3">Resumo do Sistema</h3>
						<div class="space-y-3">
							<div class="flex justify-between items-center">
								<span class="text-sm text-gray-600">Profissionais</span>
								<span class="text-sm font-semibold">142</span>
							</div>
							<div class="w-full bg-gray-200 rounded-full h-2">
								<div class="bg-rose-500 h-2 rounded-full" style="width: 75%"></div>
							</div>

							<div class="flex justify-between items-center mt-3">
								<span class="text-sm text-gray-600">Responsáveis</span>
								<span class="text-sm font-semibold">106</span>
							</div>
							<div class="w-full bg-gray-200 rounded-full h-2">
								<div class="bg-amber-500 h-2 rounded-full" style="width: 55%"></div>
							</div>

							<div class="flex justify-between items-center mt-3">
								<span class="text-sm text-gray-600">Crianças cadastradas</span>
								<span class="text-sm font-semibold">89</span>
							</div>
							<div class="w-full bg-gray-200 rounded-full h-2">
								<div class="bg-blue-500 h-2 rounded-full" style="width: 45%"></div>
							</div>
						</div>
					</div> -->

				</aside>
			</div>
		</main>

		<footer class="mt-6 sm:mt-10 py-4 sm:py-6">
			<div class="max-w-7xl mx-auto px-3 sm:px-4 text-center text-xs sm:text-sm text-gray-500">
				Painel de Visão geral do dispositivo — William Pilger © 2025
			</div>
		</footer>

		<script>
			const NETDATA_URL = 'http://authentylocal.com.br:19999';
			const BASE_URL = 'http://authentylocal.com.br';
			
			// Serviços a serem verificados
			// Formato: 'url' ou { url: 'url', name: 'nome' }
			// URL pode ser: 'host:porta', 'http://host:porta', ou apenas 'porta' para usar BASE_URL
			const SERVICES_TO_CHECK = [
				{ url: 'http://authentylocal.com.br:8080', name: 'MICRO-08 - William' },
				{ url: 'http://authentylocal.com.br:3000', name: 'MICRO-08 - William' },
				{ url: 'http://micro-10.local:3000', name: 'MICRO-10 - Diego' },
				'http://authentylocal.com.br:3001',
				{ url: '5500', name: 'MICRO-08 - Live Server 5500' }, // Usa BASE_URL quando apenas a porta é informada
				'5501'
			];
			
			// Cores para os cards de serviço
			const SERVICE_COLORS = [
				{ bg: 'bg-green-100', text: 'text-green-600', hover: 'hover:border-green-300 hover:bg-green-50' },
				{ bg: 'bg-blue-100', text: 'text-blue-600', hover: 'hover:border-blue-300 hover:bg-blue-50' },
				{ bg: 'bg-purple-100', text: 'text-purple-600', hover: 'hover:border-purple-300 hover:bg-purple-50' },
				{ bg: 'bg-indigo-100', text: 'text-indigo-600', hover: 'hover:border-indigo-300 hover:bg-indigo-50' },
				{ bg: 'bg-teal-100', text: 'text-teal-600', hover: 'hover:border-teal-300 hover:bg-teal-50' },
			];
			
			// Cache para os nomes dos charts disponíveis
			let availableCharts = null;
			
			// Função para listar todos os charts disponíveis
			async function getAvailableCharts() {
				if (availableCharts) return availableCharts;
				try {
					const response = await fetch(`${NETDATA_URL}/api/v1/charts`);
					if (!response.ok) throw new Error('Erro ao buscar charts');
					availableCharts = await response.json();
					console.log('Charts disponíveis:', Object.keys(availableCharts.charts));
					return availableCharts;
				} catch (error) {
					console.error('Erro ao buscar charts:', error);
					return null;
				}
			}
			
			// Função para encontrar um chart por padrão
			async function findChart(pattern) {
				const charts = await getAvailableCharts();
				if (!charts) return null;
				
				const chartNames = Object.keys(charts.charts);
				
				// Procurar correspondência exata
				if (chartNames.includes(pattern)) return pattern;
				
				// Procurar por padrão (regex ou substring)
				const found = chartNames.find(name => name.includes(pattern) || name.match(new RegExp(pattern)));
				if (found) {
					console.log(`Chart encontrado para '${pattern}':`, found);
					return found;
				}
				
				console.warn(`Nenhum chart encontrado para o padrão '${pattern}'`);
				return null;
			}
			
			// Função para buscar dados do Netdata
			async function fetchNetdataChart(chart, points = 1) {
				try {
					const response = await fetch(`${NETDATA_URL}/api/v1/data?chart=${chart}&points=${points}&format=json`);
					if (!response.ok) {
						console.error(`Erro ao buscar ${chart}: HTTP ${response.status}`);
						return null;
					}
					return await response.json();
				} catch (error) {
					console.error(`Erro ao buscar ${chart}:`, error);
					return null;
				}
			}

			// Função para calcular a média dos valores
			function getAverage(data) {
				if (!data || !data.data || data.data.length === 0) return 0;
				const values = data.data[0].slice(1); // Remove o timestamp
				const sum = values.reduce((a, b) => (a || 0) + (b || 0), 0);
				return sum / values.filter(v => v !== null).length;
			}

			// Função para somar valores
			function getSum(data) {
				if (!data || !data.data || data.data.length === 0) return 0;
				const values = data.data[0].slice(1);
				return values.reduce((a, b) => (a || 0) + (b || 0), 0);
			}

			// Função para atualizar os gráficos com dados reais da API do Netdata
			async function updateMetrics() {
				try {
					// Buscar dados de CPU
					const cpuData = await fetchNetdataChart('system.cpu');
					if (cpuData && cpuData.data && cpuData.data.length > 0) {
						const cpuTotal = getSum(cpuData);
						const cpu = Math.min(Math.round(cpuTotal), 100);
						document.getElementById('cpu-percent').textContent = cpu + '%';
						document.getElementById('cpu-bar').style.width = cpu + '%';
						
						// Número de cores
						const coreCount = cpuData.dimension_names ? cpuData.dimension_names.length : 0;
						document.getElementById('cpu-cores').textContent = coreCount > 0 ? `${coreCount} threads` : 'N/A';
					}

					// Buscar dados de RAM
					const ramData = await fetchNetdataChart('system.ram');
					if (ramData && ramData.data && ramData.data.length > 0) {
						// Encontrar índices para 'used' e 'free'
						const labels = ramData.dimension_names || ramData.labels;
						const usedIdx = labels.indexOf('used');
						const freeIdx = labels.indexOf('free');
						const buffersIdx = labels.indexOf('buffers');
						const cachedIdx = labels.indexOf('cached');
						
						if (usedIdx !== -1 && freeIdx !== -1) {
							const used = ramData.data[0][usedIdx + 1] || 0;
							const free = ramData.data[0][freeIdx + 1] || 0;
							const buffers = buffersIdx !== -1 ? (ramData.data[0][buffersIdx + 1] || 0) : 0;
							const cached = cachedIdx !== -1 ? (ramData.data[0][cachedIdx + 1] || 0) : 0;
							
							const total = used + free + buffers + cached;
							const ramPercent = total > 0 ? Math.round((used / total) * 100) : 0;
							const ramUsedGB = (used / 1024).toFixed(1);
							const ramTotalGB = (total / 1024).toFixed(1);
							
							document.getElementById('ram-percent').textContent = ramPercent + '%';
							document.getElementById('ram-bar').style.width = ramPercent + '%';
							document.getElementById('ram-usage').textContent = `${ramUsedGB} / ${ramTotalGB} GB`;
						}
					}


					// Atualizar timestamp
					const now = new Date();
					document.getElementById('last-update').textContent = now.toLocaleTimeString('pt-BR');
					
				} catch (error) {
					console.error('Erro ao atualizar métricas:', error);
				}
			}

			// Função para normalizar o serviço (retorna a URL completa)
			function normalizeService(service) {
				// Se for apenas um número, trata como porta e usa BASE_URL
				if (/^\d+$/.test(service)) {
					return `${BASE_URL}:${service}`;
				}
				// Se não começar com http, adiciona http://
				if (!service.startsWith('http://') && !service.startsWith('https://')) {
					return `http://${service}`;
				}
				return service;
			}
			
			// Função para verificar se um serviço está ativo
			async function checkService(serviceUrl) {
				try {
					const response = await fetch(serviceUrl, { 
						method: 'HEAD',
						mode: 'no-cors', // Permite requisições cross-origin
						cache: 'no-cache'
					});
					return true; // Se não der erro, está ativo
				} catch (error) {
					// Em modo no-cors, sempre cai aqui, mas se a porta está aberta, o navegador faz a requisição
					// Vamos tentar uma abordagem diferente usando Image
					return new Promise((resolve) => {
						const img = new Image();
						const timeout = setTimeout(() => {
							resolve(false);
						}, 2000);
						
						img.onload = () => {
							clearTimeout(timeout);
							resolve(true);
						};
						img.onerror = () => {
							clearTimeout(timeout);
							// Erro pode significar que a porta está aberta mas não retorna imagem
							resolve(true);
						};
						img.src = `${serviceUrl}/favicon.ico?${Date.now()}`;
					});
				}
			}
			
			// Função para obter o nome do serviço
			async function getServiceName(serviceUrl) {
				try {
					const response = await fetch(serviceUrl, { 
						method: 'GET',
						mode: 'cors',
						cache: 'no-cache'
					});
					const html = await response.text();
					
					// Tentar extrair o título da página
					const titleMatch = html.match(/<title>(.*?)<\/title>/i);
					if (titleMatch && titleMatch[1]) {
						return titleMatch[1].trim();
					}
				} catch (error) {
					// Ignorar erro
                    return false;
				}
				
				// Extrair host e porta da URL para exibição
				try {
					const url = new URL(serviceUrl);
					return `Serviço em ${url.host}`;
				} catch {
					return `Serviço disponível`;
				}
			}
			
			// Função para renderizar serviços dinâmicos
			async function renderDynamicServices() {
				const container = document.getElementById('dynamic-services');
				if (!container) return;
				
				// Mostrar loading
				container.innerHTML = `
					<div class="col-span-full flex items-center justify-center py-8">
						<div class="flex items-center gap-3">
							<svg class="animate-spin h-5 w-5 text-rose-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
								<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
								<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
							</svg>
							<span class="text-sm text-gray-600">Verificando serviços disponíveis...</span>
						</div>
					</div>
				`;
				
				const activeServices = [];
				
				// Verificar todos os serviços
				for (let i = 0; i < SERVICES_TO_CHECK.length; i++) {
					const service = SERVICES_TO_CHECK[i];
					
					// Suporte para string ou objeto { url, name }
					const serviceConfig = typeof service === 'string' ? { url: service } : service;
					const serviceUrl = normalizeService(serviceConfig.url);
					const customName = serviceConfig.name || null;
					
					const isActive = await checkService(serviceUrl);
					
					if (isActive) {
						const serviceName = await getServiceName(serviceUrl);
                        if(serviceName){
                            const color = SERVICE_COLORS[i % SERVICE_COLORS.length];
                            activeServices.push({ 
								url: serviceUrl, 
								serviceName, 
								customName,
								color 
							});
                        }
					}
				}
				
				// Renderizar apenas os serviços ativos (não exibe nada se não houver serviços)
				if (activeServices.length === 0) {
					container.innerHTML = `
						<div class="col-span-full text-center py-8 text-sm text-gray-500">
							Nenhum serviço adicional disponível no momento
						</div>
					`;
					return;
				}
				
				container.innerHTML = activeServices.map(service => {
					// Usar nome customizado se fornecido, senão extrair da URL
					let displayInfo = '';
					if (service.customName) {
						displayInfo = service.customName;
					} else {
						try {
							const url = new URL(service.url);
							displayInfo = url.host;
						} catch {
							displayInfo = service.url;
						}
					}
					
					return `
					<a href="${service.url}" target="_blank" class="p-3 sm:p-4 border-2 border-gray-200 rounded-lg ${service.color.hover} transition-all text-left block">
						<div class="flex items-center gap-2 sm:gap-3">
							<div class="w-8 h-8 sm:w-10 sm:h-10 ${service.color.bg} rounded-lg flex items-center justify-center flex-shrink-0">
								<svg class="w-4 h-4 sm:w-5 sm:h-5 ${service.color.text}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
								</svg>
							</div>
							<div class="min-w-0">
								<p class="font-semibold text-gray-800 text-sm sm:text-base">${service.serviceName}</p>
								<p class="text-xs text-gray-500 hidden sm:block">${displayInfo}</p>
							</div>
						</div>
					</a>
				`;
				}).join('');
			}
			
			// Carregar charts disponíveis e depois atualizar métricas
			getAvailableCharts().then(() => {
				updateMetrics();
				setInterval(updateMetrics, 3000);
			});
			
			// Verificar serviços ao carregar a página e a cada 30 segundos
			renderDynamicServices();
			setInterval(renderDynamicServices, 30000);
		</script>
	</body>
</html>
